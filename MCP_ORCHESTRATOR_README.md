# MCP Orchestrator - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

## –ß—Ç–æ —ç—Ç–æ?

**MCP Orchestrator** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ ReAct –ø–∞—Ç—Ç–µ—Ä–Ω (Reasoning + Acting).

**–ì–ª–∞–≤–Ω–∞—è —Ñ–∏—á–∞:** LLM —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞—Ç—å, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ - –¥–ª–∏–Ω–∞ —Ü–µ–ø–æ—á–∫–∏ –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞.

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:

**–ü—Ä–æ–º–ø—Ç:**
> "–ù–∞–π–¥–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ Kotlin, —Å—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π –µ–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ —Ñ–∞–π–ª"

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ü–µ–ø–æ—á–∫–∞:**
1. LLM: "–ù—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é" ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `fetch(url=kotlinlang.org)`
2. LLM –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç: "–¢–µ–ø–µ—Ä—å –Ω–∞–¥–æ —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å" ‚Üí –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
3. LLM: "–°–æ—Ö—Ä–∞–Ω—è—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç" ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `write_file(path=..., content=...)`
4. LLM: "–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞" ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `FINAL_ANSWER`

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **McpOrchestrator.kt** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å ReAct –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º
2. **SimpleMcpManager.kt** - –º–µ–Ω–µ–¥–∂–µ—Ä MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
3. **mcp-servers.json** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
4. **API endpoint:** `POST /api/mcp-orchestrator`

### –î–æ—Å—Ç—É–ø–Ω—ã–µ MCP —Å–µ—Ä–≤–µ—Ä—ã

| –°–µ—Ä–≤–µ—Ä | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------------|----------|
| **fetch** | `fetch(url, max_length, raw)` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ Markdown) |
| **filesystem** | `read_text_file`, `write_file`, `search_files`, `list_directory`, `edit_file` | –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ Downloads |
| **weather** | `get_current_temperature(lat, lon)` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º |
| **telegram** | `tg_dialogs`, `tg_dialog`, `tg_send` | –†–∞–±–æ—Ç–∞ —Å Telegram —á–∞—Ç–∞–º–∏ –∏ –∫–∞–Ω–∞–ª–∞–º–∏ |

---

## –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

MCP —Å–µ—Ä–≤–µ—Ä—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `npm install` - —É—Å—Ç–∞–Ω–æ–≤–∏–ª Filesystem MCP
- `pipx install mcp-server-fetch` - —É—Å—Ç–∞–Ω–æ–≤–∏–ª Fetch MCP

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
export YANDEX_API_KEY=your_key
export YANDEX_FOLDER_ID=your_folder_id

./gradlew run
```

### 3. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

```bash
curl -X POST http://localhost:8080/api/mcp-orchestrator \
  -H "Content-Type: application/json" \
  -d '{
    "task": "–ü–æ–ª—É—á–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ https://kotlinlang.org/ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ —Ñ–∞–π–ª kotlin.md",
    "temperature": 0.6
  }'
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

- **–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:** –ø–æ–∫–∞–∂—É—Ç –≤—Å–µ –≤—ã–∑–æ–≤—ã MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **–§–∞–π–ª:** `/Users/artur/Downloads/kotlin.md` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω
- **Response JSON:**
  ```json
  {
    "success": true,
    "finalAnswer": "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ...",
    "toolCalls": [
      {"iteration": 1, "toolName": "fetch", ...},
      {"iteration": 2, "toolName": "write_file", ...}
    ],
    "iterations": 3
  }
  ```

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ReAct Pattern

LLM —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ü–∏–∫–ª–µ:
1. **Think** (–î—É–º–∞–µ—Ç): "–ß—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?"
2. **Act** (–î–µ–π—Å—Ç–≤—É–µ—Ç): –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º–∞—Ç `TOOL_CALL: –∏–º—è_–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞`
3. **Observe** (–ù–∞–±–ª—é–¥–∞–µ—Ç): –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
4. **Repeat** (–ü–æ–≤—Ç–æ—Ä—è–µ—Ç): –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —à–∞–≥—É 1

–¶–∏–∫–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø–æ–∫–∞ LLM –Ω–µ —Å–∫–∞–∂–µ—Ç `FINAL_ANSWER`.

### System Prompt

LLM –ø–æ–ª—É—á–∞–µ—Ç:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- –§–æ—Ä–º–∞—Ç –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –§–æ—Ä–º–∞—Ç –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –§–æ—Ä–º–∞—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**LLM ‚Üí Orchestrator:**
```
TOOL_CALL: fetch
PARAMETERS: {"url": "https://example.com"}
```

**Orchestrator ‚Üí LLM:**
```
Tool result:
# Example Page
Content here...
```

**LLM ‚Üí User:**
```
FINAL_ANSWER: –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–π: Fetch + Save
```json
{
  "task": "–ü–æ–ª—É—á–∏ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É GitHub –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ —Ñ–∞–π–ª github.md"
}
```
**–¶–µ–ø–æ—á–∫–∞:** fetch ‚Üí write_file (2 –≤—ã–∑–æ–≤–∞)

### –°—Ä–µ–¥–Ω–∏–π: Multiple Fetch + Compare + Save
```json
{
  "task": "–°—Ä–∞–≤–Ω–∏ –≥–ª–∞–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Kotlin –∏ Java, —Å–æ—Ö—Ä–∞–Ω–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª"
}
```
**–¶–µ–ø–æ—á–∫–∞:** fetch(kotlin) ‚Üí fetch(java) ‚Üí analyze ‚Üí write_file (4 –≤—ã–∑–æ–≤–∞)

### –°–ª–æ–∂–Ω—ã–π: Search + Read + Analyze + Save
```json
{
  "task": "–ù–∞–π–¥–∏ –≤—Å–µ .md —Ñ–∞–π–ª—ã, –ø—Ä–æ—á–∏—Ç–∞–π —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π, —Å–æ–∑–¥–∞–π —Ä–µ–∑—é–º–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏"
}
```
**–¶–µ–ø–æ—á–∫–∞:** search_files ‚Üí list_directory_with_sizes ‚Üí read_text_file ‚Üí analyze ‚Üí write_file (5+ –≤—ã–∑–æ–≤–æ–≤)

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### mcp-servers.json

```json
{
  "mcpServers": {
    "fetch": {
      "type": "stdio",
      "command": "/Users/artur/.local/bin/mcp-server-fetch",
      "args": []
    },
    "filesystem": {
      "type": "stdio",
      "command": "node",
      "args": [
        "/path/to/node_modules/@modelcontextprotocol/server-filesystem/dist/index.js",
        "/Users/artur/Downloads"
      ]
    }
  }
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Orchestrator

–í `Main.kt`:
```kotlin
val mcpOrchestrator = McpOrchestrator(
    mcpManager = mcpManager,
    llmClient = llmClient,
    maxIterations = 15  // –ú–∞–∫—Å–∏–º—É–º –∏—Ç–µ—Ä–∞—Ü–∏–π (–∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è)
)
```

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

Orchestrator –ª–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥:

```
üéØ –ù–∞—á–∏–Ω–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ MCP Orchestrator
   –ó–∞–ø—Ä–æ—Å: –ü–æ–ª—É—á–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ...

üìç –ò—Ç–µ—Ä–∞—Ü–∏—è 1/15
ü§ñ LLM –æ—Ç–≤–µ—Ç:
   TOOL_CALL: fetch...
üîß –í—ã–∑–æ–≤ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞: fetch
   –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: {url=...}
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: # Content...

üìç –ò—Ç–µ—Ä–∞—Ü–∏—è 2/15
ü§ñ LLM –æ—Ç–≤–µ—Ç:
   TOOL_CALL: write_file...
üîß –í—ã–∑–æ–≤ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞: write_file
   –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: {path=..., content=...}
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: File written

üìç –ò—Ç–µ—Ä–∞—Ü–∏—è 3/15
ü§ñ LLM –æ—Ç–≤–µ—Ç:
   FINAL_ANSWER: –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω
   –í—Å–µ–≥–æ –∏—Ç–µ—Ä–∞—Ü–∏–π: 3
   –í—Å–µ–≥–æ –≤—ã–∑–æ–≤–æ–≤ MCP: 2
```

---

## Troubleshooting

### MCP —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `Failed to start 'filesystem'`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ node_modules
ls node_modules/@modelcontextprotocol/server-filesystem/dist/index.js

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
chmod +x /Users/artur/.local/bin/mcp-server-fetch
```

### LLM –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** LLM –æ—Ç–≤–µ—á–∞–µ—Ç –æ–±—ã—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –≤–º–µ—Å—Ç–æ TOOL_CALL

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `temperature` (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ 0.3-0.6)
2. –°–¥–µ–ª–∞–π—Ç–µ –ø—Ä–æ–º–ø—Ç –±–æ–ª–µ–µ explicit: "–∏—Å–ø–æ–ª—å–∑—É–π fetch –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è..."
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ system prompt –≤ `McpOrchestrator.kt`

### –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π (15)"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–ø—Ä–æ—Å—Ç–∏—Ç–µ –∑–∞–¥–∞—á—É
2. –£–≤–µ–ª–∏—á—å—Ç–µ `maxIterations` –≤ –∫–æ–¥–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ LLM –Ω–µ –∑–∞—Ü–∏–∫–ª–∏–ª–∞—Å—å (–ª–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –¥–µ–π—Å—Ç–≤–∏—è)

### Filesystem –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** "Permission denied" –∏–ª–∏ "File not found"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤ `mcp-servers.json` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `/Users/artur/Downloads`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: `ls -la ~/Downloads`
3. Filesystem MCP –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ Downloads

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–î–ª–∏–Ω–∞ —Ü–µ–ø–æ—á–∫–∏:** –ú–∞–∫—Å–∏–º—É–º 15 –∏—Ç–µ—Ä–∞—Ü–∏–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
2. **Filesystem scope:** –¢–æ–ª—å–∫–æ Downloads –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
3. **Token limits:** –î–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ –º–æ–≥—É—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤
4. **No streaming:** Orchestrator —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ blocking —Ä–µ–∂–∏–º–µ

---

## –£–ª—É—á—à–µ–Ω–∏—è (TODO)

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- [ ] Streaming —Ä–µ–∂–∏–º –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ fetch
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ recovery –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] Web UI –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ü–µ–ø–æ—á–µ–∫
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ (git, sqlite, etc)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã:** `MCP_ORCHESTRATOR_TEST_PROMPTS.md`
- **MCP Servers:** https://github.com/modelcontextprotocol/servers
- **ReAct Paper:** https://arxiv.org/abs/2210.03629

---

## API Reference

### POST /api/mcp-orchestrator

**Request:**
```json
{
  "task": "string",         // –ó–∞–¥–∞—á–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  "temperature": 0.6        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ LLM
}
```

**Response:**
```json
{
  "success": true,
  "finalAnswer": "string",
  "toolCalls": [
    {
      "iteration": 1,
      "toolName": "fetch",
      "parameters": "{...}",
      "result": "..."
    }
  ],
  "iterations": 3
}
```

**Errors:**
- `400 Bad Request` - –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
- `500 Internal Server Error` - –æ—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏–∏

–ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:
1. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–∑ modelcontextprotocol/servers
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω-—Å–∏—Å—Ç–µ–º—É –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
3. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é execution graph
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å prompts –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
5. –î–æ–±–∞–≤–∏—Ç—å unit/integration —Ç–µ—Å—Ç—ã

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∏—Å–ø–æ–ª—å–∑—É—è:
- Kotlin + Ktor
- Yandex GPT (yandexgpt-lite)
- Model Context Protocol (MCP)
- ReAct Pattern
